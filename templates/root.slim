#root-content

  #audios

  #audio-template.hidden
    .audio-template-content.box
      button.remove X
      br
      button.play play
      button.stop.hidden stop
      .dropdowns
        select name='oscillator-type'
          option value='sine' sine
          option value='sawtooth' sawtooth
          option value='triangle' triangle
          option value='square' square

      .sliders
        input name='oscillator' type='range' min='0' max='500'
        label for='oscillator' oscillator
        br
        input name='gain' type='range' min='0' max='300'
        label for='gain' gain

    
  button#add-audio onclick='Events.add_audio()' add audio

coffee:

  $ ->

    window.Dom = 
      audios: $("#audios")
      audio_template: $("#audio-template")

    window.Events =
      add_audio: (e) -> (->

        $template = $ Dom.audio_template[0].innerHTML
        Dom.audios.append $template
        $play_btn = $template.find(".play")
        $stop_btn = $template.find(".stop")
        $remove_btn = $template.find(".remove")
        sliders = 
          $oscillator: $template.find(".sliders [name='oscillator']")
          $gain: $template.find(".sliders [name='gain']")
        dropdowns =
          $oscillator_type: $template.find(".dropdowns [name='oscillator-type']")

        id = (@last_id += 1)

        $play_btn.on "click", =>
          @create_nodes(id)
          $play_btn.addClass("hidden")
          $stop_btn.removeClass("hidden")

        $stop_btn.on "click", =>
          @stop_nodes(id)
          $play_btn.removeClass("hidden")
          $stop_btn.addClass("hidden")

        $remove_btn.find(".remove").on "click", =>
          @stop_nodes(id)
          $template.remove()

        sliders.$oscillator.on "input", =>
          freq = sliders.$oscillator.val()
          @nodes[id].oscillator.frequency.value = freq

        sliders.$gain.on "input", =>
          val = sliders.$gain.val()
          @nodes[id].gain.value = val

        dropdowns.$oscillator_type.on "change", =>
          type = dropdowns.$oscillator_type.val()
          @nodes[id].oscillator.type = type

          

      ).apply Utils




